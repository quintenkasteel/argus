---
sidebar_position: 5
title: argus init
description: Initialize Argus configuration for your project
---

# argus init

Initialize Argus configuration files for your Haskell project.

## Synopsis

```bash
argus init [OPTIONS]
```

## Description

The `init` command creates a configuration file (`argus.toml`) with sensible defaults for your project. It can detect your project structure and customize the configuration accordingly.

## Options

### Configuration Type

| Option | Description |
|--------|-------------|
| `--minimal` | Create minimal configuration |
| `--full` | Create full configuration with all options |
| `--strict` | Create strict configuration (recommended for new projects) |
| `--lenient` | Create lenient configuration (for legacy projects) |

### Template Selection

| Option | Description |
|--------|-------------|
| `--template NAME` | Use predefined template |
| `--from FILE` | Base configuration on existing file |

### Customization

| Option | Description |
|--------|-------------|
| `--name NAME` | Project name (auto-detected from .cabal/package.yaml) |
| `--src-dirs DIRS` | Source directories (comma-separated) |
| `--test-dirs DIRS` | Test directories |
| `--exclude PATTERNS` | Patterns to exclude |

### Output

| Option | Description |
|--------|-------------|
| `-o, --output FILE` | Output file (default: `argus.toml`) |
| `--stdout` | Print to stdout instead of file |
| `--force` | Overwrite existing configuration |
| `--dry-run` | Show what would be created |

## Templates

### Available Templates

| Template | Description |
|----------|-------------|
| `default` | Standard configuration |
| `strict` | Strict rules, errors on warnings |
| `lenient` | Relaxed rules, mostly suggestions |
| `library` | Configuration for library packages |
| `application` | Configuration for applications |
| `web` | Web application (Servant, Yesod, etc.) |
| `data-science` | Data science projects |

## Examples

### Basic Initialization

```bash
# Create default configuration
argus init

# Creates argus.toml with:
# - Detected source directories
# - Sensible default rules
# - Standard exclusions
```

### Using Templates

```bash
# Strict configuration for new projects
argus init --strict

# Lenient for legacy codebases
argus init --lenient

# Library-specific settings
argus init --template library

# Web application settings
argus init --template web
```

### Custom Configuration

```bash
# Specify source directories
argus init --src-dirs "src,lib,app"

# Add exclusions
argus init --exclude "Generated/*,Paths_*"

# Full configuration with all options documented
argus init --full
```

### Output Options

```bash
# Preview without creating file
argus init --dry-run

# Output to specific file
argus init -o .argus.toml

# Print to stdout
argus init --stdout

# Overwrite existing
argus init --force
```

## Generated Configuration

### Minimal Configuration

```bash
argus init --minimal
```

```toml
# Argus configuration
# https://argus.dev/docs/configuration

[general]
directories = ["src", "app", "lib"]
exclude = ["**/Paths_*.hs"]

[rules]
enabled = true
```

### Default Configuration

```bash
argus init
```

```toml
# Argus configuration for my-project
# Generated by argus init

[general]
# Source directories to analyze
directories = ["src", "app", "lib"]

# Files and directories to exclude
exclude = [
  "**/Paths_*.hs",
  "**/*_generated.hs",
]

# Analysis mode: quick, full, plugin
mode = "full"

[analysis]
# Parallel workers (auto = CPU count)
parallel = "auto"

# Enable caching
cache = true

[rules]
# Enable all rules by default
enabled = true

# Minimum severity to report
severity = "warning"

# Rules to disable
disabled = []

# Category severity overrides
[rules.severity]
# "partial/*" = "error"
# "security/*" = "error"

[scopes]
# Relax rules in test files
[[scopes]]
modules = ["*Spec", "Test.*", "*Test*"]
ignore = ["partial/*", "complexity/*"]
```

### Strict Configuration

```bash
argus init --strict
```

```toml
# Strict Argus configuration
# Recommended for new projects

[general]
directories = ["src", "app", "lib"]
exclude = ["**/Paths_*.hs"]
mode = "full"

[analysis]
parallel = "auto"
cache = true

[rules]
enabled = true
severity = "warning"
fail-on = "warning"

# Treat these as errors
[rules.severity]
"partial/*" = "error"
"security/*" = "error"
"performance/space-leak" = "error"

# No disabled rules - enforce everything

[naming]
enabled = true
check-types = true
check-variables = true

[complexity]
enabled = true
max-cyclomatic = 10
max-cognitive = 15
max-function-lines = 50

[scopes]
# Even tests should follow most rules
[[scopes]]
modules = ["*Spec", "Test.*"]
ignore = ["complexity/*"]  # Only relax complexity in tests
```

### Lenient Configuration

```bash
argus init --lenient
```

```toml
# Lenient Argus configuration
# For legacy projects or gradual adoption

[general]
directories = ["src"]
exclude = [
  "**/Paths_*.hs",
  "**/Generated/**",
  "**/Legacy/**",
]
mode = "quick"

[rules]
enabled = true
severity = "error"  # Only show errors

# Disable many rules initially
disabled = [
  "modernize/*",
  "redundant/*",
  "naming/*",
  "complexity/*",
]

# Focus on critical issues
[rules.severity]
"partial/*" = "warning"
"security/*" = "error"

[scopes]
# Ignore all rules in legacy code
[[scopes]]
modules = ["Legacy.*", "*.Legacy.*"]
ignore = ["ALL"]
```

### Web Application Template

```bash
argus init --template web
```

```toml
# Argus configuration for web applications

[general]
directories = ["src", "app"]
exclude = [
  "**/Paths_*.hs",
  "**/Static/**",
]
mode = "full"

[rules]
enabled = true

[rules.severity]
"security/*" = "error"
"partial/*" = "error"

# Web-specific patterns
[[patterns.rules]]
name = "no-raw-sql"
match = "rawSql"
severity = "error"
message = "Use type-safe queries"

[[patterns.rules]]
name = "structured-logging"
match = "putStrLn"
conditions = [{ type = "in-module", pattern = "*.Handler.*" }]
severity = "warning"
message = "Use structured logging"

[[restrictions.functions]]
name = "unsafePerformIO"
within = []
message = "Never use in web handlers"

# Handler modules should be strict
[[scopes]]
modules = ["*.Handler.*", "*.API.*"]
[scopes.severity]
"partial/*" = "error"
"security/*" = "error"

# Relax in tests
[[scopes]]
modules = ["*Spec", "Test.*"]
ignore = ["partial/*", "complexity/*"]
```

## Project Detection

`argus init` automatically detects:

### From package.yaml

```yaml
name: my-project
library:
  source-dirs: src
executables:
  my-exe:
    source-dirs: app
tests:
  my-test:
    source-dirs: test
```

Detected configuration:
- Name: `my-project`
- Directories: `["src", "app"]`
- Test directories: `["test"]`

### From .cabal File

```cabal
name:           my-project
library
  hs-source-dirs: src
executable my-exe
  hs-source-dirs: app
test-suite my-test
  hs-source-dirs: test
```

### From Stack/Cabal Project

Detects multi-package projects and suggests appropriate configuration.

## Interactive Mode

```bash
argus init --interactive
```

Prompts for:

```
Project name [my-project]:
Source directories [src, app]:
Enable strict mode? [y/N]:
Configure naming rules? [Y/n]:
Configure complexity limits? [Y/n]:

Creating argus.toml...
Done! Run 'argus check' to analyze your project.
```

## Updating Configuration

### Merge with Existing

```bash
# Preserve existing settings, add new options
argus init --merge

# Add new rules from template
argus init --template strict --merge
```

### Migrate from HLint

```bash
# Convert .hlint.yaml to argus.toml
argus init --from .hlint.yaml
```

## Exit Codes

| Code | Condition |
|------|-----------|
| `0` | Configuration created successfully |
| `1` | Configuration already exists (use `--force`) |
| `2` | Invalid options |

## See Also

- **[Configuration File Format](../configuration/file-format)**: Full configuration reference
- **[Rules Configuration](../configuration/rules-section)**: Rule settings
- **[Project Setup](../getting-started/project-setup)**: Complete setup guide
